<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ch√∫c m·ª´ng 20-10 üíê</title>
  <style>
    html,body{
      height:100%;margin:0;background:#000;overflow:hidden;
      font-family: Inter, "Segoe UI", "Noto Sans", Roboto, Arial, sans-serif;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }
    canvas{position:fixed;inset:0;display:block;background:#000;}
    .card{
      position:fixed;
      left:50%;top:50%;
      transform:translate(-50%,-50%) scale(.95);
      background:rgba(255,20,147,0.08);
      border:1px solid rgba(255,20,147,0.22);
      backdrop-filter:blur(10px);
      padding:28px 40px;border-radius:18px;text-align:center;
      box-shadow:0 10px 30px rgba(0,0,0,0.6);
      color:#ffd6ea;opacity:0;pointer-events:none;z-index:10;
      transition:opacity .5s ease,transform .5s ease;
    }
    .card.show{opacity:1;transform:translate(-50%,-50%) scale(1);pointer-events:auto}
    .card h1{margin:0;font-size:34px;color:#ffb0d9}
    .card p{
      margin-top:12px;font-size:15px;white-space:pre-wrap;display:inline-block;
      border-right:2px solid #ff9ad6;padding-right:6px;
      animation:blink .8s step-end infinite alternate;
    }
    @keyframes blink{50%{border-color:transparent}}
    .top-right-note{position:fixed;right:14px;top:14px;color:#ff9ad6;font-size:13px;opacity:.85;z-index:9}
  </style>
</head>
<body>
  <div class="top-right-note">Nh·∫•n m√†n h√¨nh ƒë·ªÉ hi·ªán/·∫©n popup üíñ</div>
  <canvas id="c"></canvas>

  <div class="card" id="popup">
    <h1>Ch√∫c m·ª´ng 20-10</h1>
    <p id="subtitle"></p>
  </div>

  <script>
  // --- Canvas chu·∫©n HDPI ---
  const canvas = document.getElementById('c');
  const ctx = canvas.getContext('2d');

  function resizeCanvas() {
    const dpr = Math.max(window.devicePixelRatio || 1, 1);
    const w = window.innerWidth;
    const h = window.innerHeight;
    canvas.style.width = w + 'px';
    canvas.style.height = h + 'px';
    canvas.width = Math.round(w * dpr);
    canvas.height = Math.round(h * dpr);
    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
  }
  addEventListener('resize', resizeCanvas);
  resizeCanvas();

  let W = window.innerWidth;
  let H = window.innerHeight;
  const color = '255,20,147';

  const letters = [
    '20/10','vui','v·∫ª','nha','Ch√∫c','m·ª´ng','üíê','üíñ','8386','v·∫°n','s·ª±','nh∆∞','√Ω','t·ª∑','m∆°','tri·ªáu','b·∫•t','ng·ªù'
  ];

  // === T·∫°o c·ªôt r∆°i ===
  let fontSize = Math.max(16, Math.floor(Math.min(W, H) / 34));
  function buildDrops() {
    W = window.innerWidth; H = window.innerHeight;
    fontSize = Math.max(16, Math.floor(Math.min(W, H) / 34));
    const cols = Math.floor(W / (fontSize * 0.9));
    const drops = new Array(cols);
    for (let i = 0; i < cols; i++) {
      drops[i] = {
        y: Math.random() * -H,
        speed: 0.5 + Math.random() * 0.6, // t·ªëc ƒë·ªô nhanh h∆°n
        x: i * (fontSize * 0.9)
      };
    }
    return drops;
  }

  let drops = buildDrops();
  addEventListener('resize', ()=>{ drops = buildDrops(); });

  // === V·∫Ω hi·ªáu ·ª©ng r∆°i ===
  function draw() {
    ctx.fillStyle = 'rgba(0,0,0,0.08)';
    ctx.fillRect(0, 0, window.innerWidth, window.innerHeight);
    ctx.font = `${fontSize}px Inter, "Segoe UI", "Noto Sans", Roboto, Arial, sans-serif`;
    ctx.textBaseline = 'top';
    ctx.shadowColor = `rgba(${color},0.65)`;
    ctx.shadowBlur = 8;

    for (let i = 0; i < drops.length; i++) {
      const d = drops[i];
      const txt = letters[Math.floor(Math.random() * letters.length)];
      const alpha = 0.9 - Math.min(0.8, d.y / (H * 1.3));
      ctx.fillStyle = `rgba(${color},${alpha})`;
      ctx.fillText(txt, d.x, d.y);

      // tƒÉng t·ªëc r∆°i
      d.y += d.speed * 2.2; // h·ªá s·ªë 2.2 = nhanh h∆°n g·∫•p ƒë√¥i b·∫£n c≈©

      // reset l·∫°i khi r∆°i qu√° m√†n
      if (d.y > H + 60) {
        d.y = -Math.random() * 300;
        d.speed = 0.4 + Math.random() * 0.8;
      }
    }
    requestAnimationFrame(draw);
  }
  draw();

  // === Popup g√µ ch·ªØ ===
  const popup = document.getElementById('popup');
  const subtitleEl = document.getElementById('subtitle');
  const message = "Ch√∫c m√†y 1 ng√†y 20/10 th·∫≠t vui v·∫ª üíê\n8386 v·∫°n s·ª± nh∆∞ √Ω, t·ª∑ s·ª± nh∆∞ m∆°,\ntri·ªáu tri·ªáu b·∫•t ng·ªù v√† lu√¥n xinh ƒë·∫πp h·ªçc gi·ªèi üíñ";

  function typeText(text, el) {
    let i = 0;
    el.textContent = '';
    const speed = 30;
    const interval = setInterval(()=>{
      el.textContent += text[i] ?? '';
      i++;
      if (i >= text.length) clearInterval(interval);
    }, speed);
  }

  function showPopup(){
    popup.classList.add('show');
    typeText(message, subtitleEl);
  }
  setTimeout(showPopup, 2500);

  let visible = true;
  addEventListener('pointerdown', ()=>{
    visible = !visible;
    if (visible) showPopup();
    else popup.classList.remove('show');
  });
  </script>
</body>
</html>
